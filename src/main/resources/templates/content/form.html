<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::content})}">
<body>
    <div th:fragment="content" class="row">
        <div class="col-lg-8 mx-auto">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="mb-0">
                    <i class="fas fa-edit text-primary me-2"></i>
                    <span th:text="${contentId != null ? 'Edit Content' : 'Add Content'}">Add Content</span>
                </h2>
                <a th:href="@{/content}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-2"></i>Back to List
                </a>
            </div>

            <div class="card shadow-sm">
                <div class="card-body">
                    <form th:action="${contentId != null ? '/content/' + contentId : '/content'}" 
                          th:object="${contentDto}" method="post">
                        
                        <!-- Title -->
                        <div class="mb-3">
                            <label for="title" class="form-label">
                                Title <span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" id="title" th:field="*{title}" 
                                   th:classappend="${#fields.hasErrors('title')} ? 'is-invalid' : ''"
                                   placeholder="Enter content title..." required>
                            <div th:if="${#fields.hasErrors('title')}" class="invalid-feedback">
                                <ul class="mb-0">
                                    <li th:each="error : ${#fields.errors('title')}" th:text="${error}"></li>
                                </ul>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="mb-3">
                            <label for="body" class="form-label">
                                Body <span class="text-danger">*</span>
                            </label>
                            <textarea class="form-control" id="body" th:field="*{body}" rows="10"
                                     th:classappend="${#fields.hasErrors('body')} ? 'is-invalid' : ''"
                                     placeholder="Enter content body..." required></textarea>
                            <div th:if="${#fields.hasErrors('body')}" class="invalid-feedback">
                                <ul class="mb-0">
                                    <li th:each="error : ${#fields.errors('body')}" th:text="${error}"></li>
                                </ul>
                            </div>
                            <div class="form-text">
                                This content will be indexed and searchable. You can use markdown formatting.
                            </div>
                        </div>

                        <div class="row">
                            <!-- Category -->
                            <div class="col-md-6 mb-3">
                                <label for="category" class="form-label">Category</label>
                                <input type="text" class="form-control" id="category" th:field="*{category}"
                                       th:classappend="${#fields.hasErrors('category')} ? 'is-invalid' : ''"
                                       placeholder="e.g., Technology, News, Tutorial">
                                <div th:if="${#fields.hasErrors('category')}" class="invalid-feedback">
                                    <ul class="mb-0">
                                        <li th:each="error : ${#fields.errors('category')}" th:text="${error}"></li>
                                    </ul>
                                </div>
                                <div class="form-text">
                                    Optional category for organizing content
                                </div>
                            </div>

                            <!-- Author -->
                            <div class="col-md-6 mb-3">
                                <label for="author" class="form-label">Author</label>
                                <input type="text" class="form-control" id="author" th:field="*{author}"
                                       th:classappend="${#fields.hasErrors('author')} ? 'is-invalid' : ''"
                                       placeholder="Author name">
                                <div th:if="${#fields.hasErrors('author')}" class="invalid-feedback">
                                    <ul class="mb-0">
                                        <li th:each="error : ${#fields.errors('author')}" th:text="${error}"></li>
                                    </ul>
                                </div>
                                <div class="form-text">
                                    Optional author information
                                </div>
                            </div>
                        </div>

                        <!-- Tags -->
                        <div class="mb-4">
                            <label for="tags" class="form-label">Tags</label>
                            <input type="text" class="form-control" id="tags" th:field="*{tags}"
                                   th:classappend="${#fields.hasErrors('tags')} ? 'is-invalid' : ''"
                                   placeholder="e.g., java, spring boot, tutorial, programming">
                            <div th:if="${#fields.hasErrors('tags')}" class="invalid-feedback">
                                <ul class="mb-0">
                                    <li th:each="error : ${#fields.errors('tags')}" th:text="${error}"></li>
                                </ul>
                            </div>
                            <div class="form-text">
                                Optional comma-separated tags for better searchability
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="d-flex justify-content-between">
                            <div>
                                <a th:href="@{/content}" class="btn btn-secondary">
                                    <i class="fas fa-times me-2"></i>Cancel
                                </a>
                            </div>
                            <div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-2"></i>
                                    <span th:text="${contentId != null ? 'Update Content' : 'Create Content'}">Create Content</span>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Help Panel -->
            <div class="card mt-4">
                <div class="card-header">
                    <h6 class="mb-0">
                        <i class="fas fa-question-circle text-info me-2"></i>Tips for Better Indexing
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Title Guidelines:</h6>
                            <ul class="small mb-3">
                                <li>Use descriptive, clear titles</li>
                                <li>Include important keywords</li>
                                <li>Keep it concise but informative</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>Content Guidelines:</h6>
                            <ul class="small mb-3">
                                <li>Write comprehensive, detailed content</li>
                                <li>Use natural language for better search results</li>
                                <li>Include relevant keywords naturally</li>
                            </ul>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Categories:</h6>
                            <ul class="small mb-0">
                                <li>Use consistent category names</li>
                                <li>Keep categories broad but meaningful</li>
                                <li>Examples: Technology, News, Tutorial, Documentation</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>Tags:</h6>
                            <ul class="small mb-0">
                                <li>Use specific, relevant tags</li>
                                <li>Separate multiple tags with commas</li>
                                <li>Include technical terms and keywords</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>